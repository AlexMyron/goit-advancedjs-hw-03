{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_8CoVBLC9aZolICXzvyyxeEAcUbJcBLCBfeHB03Q0jVss9sHPS8qokxRh5dbP8Kg4';\n\nconst listUrl = 'https://api.thecatapi.com/v1/breeds';\nconst catUrl = 'https://api.thecatapi.com/v1/images/search?';\n\nfunction fetchBreeds() {\n  return axios({ url:listUrl }).then(res => {\n    if (res.status !== 200)\n      throw new Error('Sorry, but cats have been finished!!');\n    return res.data;\n  });\n}\n\nfunction fetchCatByBreed(breed_ids) {\n  const url = `${catUrl}breed_ids=${breed_ids}`;\n  return axios({ url }).then(res => {\n    if (res.status !== 200)\n      throw new Error('Sorry, but cats have been finished!!');\n    return res.data[0];\n  });\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api.js';\n\nconst refs = {\n  select: document.querySelector('.js-breed-select'),\n  selectWrapper: document.querySelector('.js-select-wrapper'),\n  catInfo: document.querySelector('.js-cat-info'),\n  loader: document.querySelector('.js-loader'),\n  error: document.querySelector('.js-error'),\n};\n\nconst customSelect = new SlimSelect({\n  select: refs.select,\n  data: [],\n});\n\nfunction renderSelect(list) {\n  return list.map(({ id, name }) => {\n    return { value: id, text: name };\n  });\n}\n\nfunction renderCatInfo({ url, breeds }) {\n  return `<div class=\"cat-info__image-thumb\"><img class=\"cat-info__image\" src=\"${url}\" alt=\"${breeds[0].name}\" width=\"350\" /></div>\n  <div class=\"cat-info__detais\">\n    <div>\n      <h2 class=\"cat-info__title\">${breeds[0].name}</h2>\n      <p class=\"cat-info__description\">${breeds[0].description}</p>\n    </div>\n    <div class=\"cat-info__temperament\">\n      <h3 class=\"cat-info__temperament-title\">Temperament</h3>\n      <p class=\"cat-info__temperament-text\">${breeds[0].temperament}</p>\n    </div>\n  </div>`;\n}\n\nfunction showToast() {\n  iziToast.show({\n    message: 'Oops! Something went wrong! Try reload the page!',\n    close: false,\n    closeOnClick: true,\n    position: 'topRight',\n    messageColor: '#fff',\n    backgroundColor: '#d60808',\n  });\n}\n\nfetchBreeds()\n  .then(data => {\n    refs.selectWrapper.classList.remove('hidden');\n    customSelect.setData(renderSelect(data));\n  })\n  .catch(e => {\n    console.log(e.message);\n    showToast();\n  })\n  .finally(() => refs.loader.classList.add('hidden'));\n\nrefs.select.addEventListener('change', ({ target: { value: catId } }) => {\n  refs.loader.classList.remove('hidden');\n  refs.catInfo.innerHTML = '';\n  fetchCatByBreed(catId)\n    .then(data => {\n      refs.catInfo.insertAdjacentHTML('beforeend', renderCatInfo(data));\n    })\n    .catch(e => {\n      console.log(e.message);\n      showToast();\n    })\n    .finally(() => refs.loader.classList.add('hidden'));\n});\n"],"names":["axios","listUrl","catUrl","fetchBreeds","res","fetchCatByBreed","breed_ids","url","refs","customSelect","SlimSelect","renderSelect","list","id","name","renderCatInfo","breeds","showToast","iziToast","data","e","catId"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,MAAMC,EAAU,sCACVC,EAAS,8CAEf,SAASC,GAAc,CACrB,OAAOH,EAAM,CAAE,IAAIC,CAAO,CAAE,EAAE,KAAKG,GAAO,CACxC,GAAIA,EAAI,SAAW,IACjB,MAAM,IAAI,MAAM,sCAAsC,EACxD,OAAOA,EAAI,IACf,CAAG,CACH,CAEA,SAASC,EAAgBC,EAAW,CAClC,MAAMC,EAAM,GAAGL,cAAmBI,IAClC,OAAON,EAAM,CAAE,IAAAO,CAAK,CAAA,EAAE,KAAKH,GAAO,CAChC,GAAIA,EAAI,SAAW,IACjB,MAAM,IAAI,MAAM,sCAAsC,EACxD,OAAOA,EAAI,KAAK,EACpB,CAAG,CACH,CClBA,MAAMI,EAAO,CACX,OAAQ,SAAS,cAAc,kBAAkB,EACjD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,QAAS,SAAS,cAAc,cAAc,EAC9C,OAAQ,SAAS,cAAc,YAAY,EAC3C,MAAO,SAAS,cAAc,WAAW,CAC3C,EAEMC,EAAe,IAAIC,EAAW,CAClC,OAAQF,EAAK,OACb,KAAM,CAAE,CACV,CAAC,EAED,SAASG,EAAaC,EAAM,CAC1B,OAAOA,EAAK,IAAI,CAAC,CAAE,GAAAC,EAAI,KAAAC,CAAI,KAClB,CAAE,MAAOD,EAAI,KAAMC,CAAI,EAC/B,CACH,CAEA,SAASC,EAAc,CAAE,IAAAR,EAAK,OAAAS,GAAU,CACtC,MAAO,wEAAwET,WAAaS,EAAO,GAAG;AAAA;AAAA;AAAA,oCAGpEA,EAAO,GAAG;AAAA,yCACLA,EAAO,GAAG;AAAA;AAAA;AAAA;AAAA,8CAILA,EAAO,GAAG;AAAA;AAAA,SAGxD,CAEA,SAASC,GAAY,CACnBC,EAAS,KAAK,CACZ,QAAS,mDACT,MAAO,GACP,aAAc,GACd,SAAU,WACV,aAAc,OACd,gBAAiB,SACrB,CAAG,CACH,CAEAf,EAAa,EACV,KAAKgB,GAAQ,CACZX,EAAK,cAAc,UAAU,OAAO,QAAQ,EAC5CC,EAAa,QAAQE,EAAaQ,CAAI,CAAC,CAC3C,CAAG,EACA,MAAMC,GAAK,CACV,QAAQ,IAAIA,EAAE,OAAO,EACrBH,GACJ,CAAG,EACA,QAAQ,IAAMT,EAAK,OAAO,UAAU,IAAI,QAAQ,CAAC,EAEpDA,EAAK,OAAO,iBAAiB,SAAU,CAAC,CAAE,OAAQ,CAAE,MAAOa,CAAK,KAAS,CACvEb,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,QAAQ,UAAY,GACzBH,EAAgBgB,CAAK,EAClB,KAAKF,GAAQ,CACZX,EAAK,QAAQ,mBAAmB,YAAaO,EAAcI,CAAI,CAAC,CACtE,CAAK,EACA,MAAM,GAAK,CACV,QAAQ,IAAI,EAAE,OAAO,EACrBF,GACN,CAAK,EACA,QAAQ,IAAMT,EAAK,OAAO,UAAU,IAAI,QAAQ,CAAC,CACtD,CAAC"}
{"version":3,"file":"commonHelpers.js","sources":["../src/js/cat-api.js","../src/index.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.headers.common['x-api-key'] =\n  'live_8CoVBLC9aZolICXzvyyxeEAcUbJcBLCBfeHB03Q0jVss9sHPS8qokxRh5dbP8Kg4';\n\nconst listUrl = 'https://api.thecatapi.com/v1/breeds';\nconst catUrl = 'https://api.thecatapi.com/v1/images/search?';\n\nfunction fetchBreeds() {\n  return axios({ url:listUrl }).then(res => {\n    if (res.status !== 200)\n      throw new Error('Sorry, but cats have been finished!!');\n    return res.data;\n  });\n}\n\nfunction fetchCatByBreed(breed_ids) {\n  if (!breed_ids) return;\n  const url = `${catUrl}breed_ids=${breed_ids}`;\n  return axios({ url }).then(res => {\n    if (res.status !== 200)\n      throw new Error('Sorry, but cats have been finished!!');\n    return res.data[0];\n  });\n}\n\nexport { fetchBreeds, fetchCatByBreed };\n","import SlimSelect from 'slim-select';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchBreeds, fetchCatByBreed } from './js/cat-api.js';\n\nconst refs = {\n  select: document.querySelector('.js-breed-select'),\n  selectWrapper: document.querySelector('.js-select-wrapper'),\n  catInfo: document.querySelector('.js-cat-info'),\n  loader: document.querySelector('.js-loader'),\n  error: document.querySelector('.js-error'),\n};\n\nconst customSelect = new SlimSelect({\n  select: refs.select,\n  data: [],\n  settings: {\n    placeholderText: 'Choose your kitty',\n  },\n  events: {\n    afterChange: breedData => handleChange(breedData),\n  },\n});\n\nfetchBreeds()\n  .then(data => {\n    refs.selectWrapper.classList.remove('hidden');\n    customSelect.setData(renderSelect(data));\n  })\n  .catch(e => {\n    console.log(e.message);\n    showToast();\n  })\n  .finally(() => refs.loader.classList.add('hidden'));\n\nfunction renderSelect(list) {\n  const listMarkup = list.map(({ id, name }) => {\n    return { value: id, text: name };\n  });\n\n  listMarkup.unshift({ value: '', text: 'Choose your kitty' });\n  return listMarkup;\n}\n\nfunction renderCatInfo({ url, breeds }) {\n  return `<div class=\"cat-info__image-thumb\"><img class=\"cat-info__image\" src=\"${url}\" alt=\"${breeds[0].name}\" width=\"350\" /></div>\n  <div class=\"cat-info__detais\">\n    <div>\n      <h2 class=\"cat-info__title\">${breeds[0].name}</h2>\n      <p class=\"cat-info__description\">${breeds[0].description}</p>\n    </div>\n    <div class=\"cat-info__temperament\">\n      <h3 class=\"cat-info__temperament-title\">Temperament</h3>\n      <p class=\"cat-info__temperament-text\">${breeds[0].temperament}</p>\n    </div>\n  </div>`;\n}\n\nfunction showToast() {\n  iziToast.show({\n    message: 'Oops! Something went wrong! Try reload the page!',\n    close: false,\n    closeOnClick: true,\n    position: 'topRight',\n    messageColor: '#fff',\n    backgroundColor: '#d60808',\n  });\n}\n\nfunction handleChange(breedData) {\n  const catId = breedData[0].value;\n\n  if (!catId) return;\n\n  refs.loader.classList.remove('hidden');\n  refs.catInfo.innerHTML = '';\n  fetchCatByBreed(catId)\n    .then(data => {\n      refs.catInfo.insertAdjacentHTML('beforeend', renderCatInfo(data));\n    })\n    .catch(e => {\n      console.log(e.message);\n      showToast();\n    })\n    .finally(() => refs.loader.classList.add('hidden'));\n}\n"],"names":["axios","listUrl","catUrl","fetchBreeds","res","fetchCatByBreed","breed_ids","url","refs","customSelect","SlimSelect","breedData","handleChange","data","renderSelect","showToast","list","listMarkup","id","name","renderCatInfo","breeds","iziToast","catId","e"],"mappings":"owBAEAA,EAAM,SAAS,QAAQ,OAAO,aAC5B,wEAEF,MAAMC,EAAU,sCACVC,EAAS,8CAEf,SAASC,GAAc,CACrB,OAAOH,EAAM,CAAE,IAAIC,CAAO,CAAE,EAAE,KAAKG,GAAO,CACxC,GAAIA,EAAI,SAAW,IACjB,MAAM,IAAI,MAAM,sCAAsC,EACxD,OAAOA,EAAI,IACf,CAAG,CACH,CAEA,SAASC,EAAgBC,EAAW,CAClC,GAAI,CAACA,EAAW,OAChB,MAAMC,EAAM,GAAGL,cAAmBI,IAClC,OAAON,EAAM,CAAE,IAAAO,CAAK,CAAA,EAAE,KAAKH,GAAO,CAChC,GAAIA,EAAI,SAAW,IACjB,MAAM,IAAI,MAAM,sCAAsC,EACxD,OAAOA,EAAI,KAAK,EACpB,CAAG,CACH,CCnBA,MAAMI,EAAO,CACX,OAAQ,SAAS,cAAc,kBAAkB,EACjD,cAAe,SAAS,cAAc,oBAAoB,EAC1D,QAAS,SAAS,cAAc,cAAc,EAC9C,OAAQ,SAAS,cAAc,YAAY,EAC3C,MAAO,SAAS,cAAc,WAAW,CAC3C,EAEMC,EAAe,IAAIC,EAAW,CAClC,OAAQF,EAAK,OACb,KAAM,CAAE,EACR,SAAU,CACR,gBAAiB,mBAClB,EACD,OAAQ,CACN,YAAaG,GAAaC,EAAaD,CAAS,CACjD,CACH,CAAC,EAEDR,EAAa,EACV,KAAKU,GAAQ,CACZL,EAAK,cAAc,UAAU,OAAO,QAAQ,EAC5CC,EAAa,QAAQK,EAAaD,CAAI,CAAC,CAC3C,CAAG,EACA,MAAM,GAAK,CACV,QAAQ,IAAI,EAAE,OAAO,EACrBE,GACJ,CAAG,EACA,QAAQ,IAAMP,EAAK,OAAO,UAAU,IAAI,QAAQ,CAAC,EAEpD,SAASM,EAAaE,EAAM,CAC1B,MAAMC,EAAaD,EAAK,IAAI,CAAC,CAAE,GAAAE,EAAI,KAAAC,MAC1B,CAAE,MAAOD,EAAI,KAAMC,CAAI,EAC/B,EAED,OAAAF,EAAW,QAAQ,CAAE,MAAO,GAAI,KAAM,mBAAmB,CAAE,EACpDA,CACT,CAEA,SAASG,EAAc,CAAE,IAAAb,EAAK,OAAAc,GAAU,CACtC,MAAO,wEAAwEd,WAAac,EAAO,GAAG;AAAA;AAAA;AAAA,oCAGpEA,EAAO,GAAG;AAAA,yCACLA,EAAO,GAAG;AAAA;AAAA;AAAA;AAAA,8CAILA,EAAO,GAAG;AAAA;AAAA,SAGxD,CAEA,SAASN,GAAY,CACnBO,EAAS,KAAK,CACZ,QAAS,mDACT,MAAO,GACP,aAAc,GACd,SAAU,WACV,aAAc,OACd,gBAAiB,SACrB,CAAG,CACH,CAEA,SAASV,EAAaD,EAAW,CAC/B,MAAMY,EAAQZ,EAAU,GAAG,MAEtBY,IAELf,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrCA,EAAK,QAAQ,UAAY,GACzBH,EAAgBkB,CAAK,EAClB,KAAKV,GAAQ,CACZL,EAAK,QAAQ,mBAAmB,YAAaY,EAAcP,CAAI,CAAC,CACtE,CAAK,EACA,MAAMW,GAAK,CACV,QAAQ,IAAIA,EAAE,OAAO,EACrBT,GACN,CAAK,EACA,QAAQ,IAAMP,EAAK,OAAO,UAAU,IAAI,QAAQ,CAAC,EACtD"}